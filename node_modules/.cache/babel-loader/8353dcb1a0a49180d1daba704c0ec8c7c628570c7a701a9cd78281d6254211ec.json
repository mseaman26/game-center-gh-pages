{"ast":null,"code":"import _regeneratorRuntime from\"/Users/michaelseaman/Desktop/programming_projects/Independant/game-center-gh-pages/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/michaelseaman/Desktop/programming_projects/Independant/game-center-gh-pages/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"/Users/michaelseaman/Desktop/programming_projects/Independant/game-center-gh-pages/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/michaelseaman/Desktop/programming_projects/Independant/game-center-gh-pages/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/michaelseaman/Desktop/programming_projects/Independant/game-center-gh-pages/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import{loginApi}from'../utils/api/userApi';import Auth from'../utils/auth';import{TextField,Button,Container,Typography}from'@material-ui/core';import{useNavigate}from'react-router-dom';import{useAuthContext}from'../utils/authContext';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var LoginForm=function LoginForm(){var _useAuthContext=useAuthContext(),currentUser=_useAuthContext.currentUser,setCurrentUser=_useAuthContext.setCurrentUser;var navigate=useNavigate();var _useState=useState({username:'',password:''}),_useState2=_slicedToArray(_useState,2),userFormData=_useState2[0],setUserFormData=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),userLoginError=_useState4[0],setUserLoginError=_useState4[1];var handleInputChange=function handleInputChange(event){var _event$target=event.target,name=_event$target.name,value=_event$target.value;setUserFormData(_objectSpread(_objectSpread({},userFormData),{},_defineProperty({},name,value)));};var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();console.log(userFormData);// Handle login logic here\n_context.prev=2;_context.next=5;return loginApi(userFormData);case 5:response=_context.sent;if(response.token){_context.next=8;break;}throw new Error('something went wrong!');case 8:Auth.login(response.token);setCurrentUser(userFormData.username);navigate('/');_context.next=17;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](2);console.error(_context.t0);setUserLoginError(true);case 17:case\"end\":return _context.stop();}},_callee,null,[[2,13]]);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(Container,{maxWidth:\"sm\",children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",align:\"center\",gutterBottom:true,children:\"Login\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(TextField,{label:\"Username\",value:userFormData.username,onChange:handleInputChange,fullWidth:true,margin:\"normal\",name:\"username\"}),/*#__PURE__*/_jsx(TextField,{label:\"Password\",type:\"password\",value:userFormData.password,onChange:handleInputChange,fullWidth:true,margin:\"normal\",name:\"password\"}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"contained\",color:\"primary\",fullWidth:true,size:\"large\",children:\"Login\"})]})]});};export default LoginForm;","map":{"version":3,"names":["React","useState","loginApi","Auth","TextField","Button","Container","Typography","useNavigate","useAuthContext","jsx","_jsx","jsxs","_jsxs","LoginForm","_useAuthContext","currentUser","setCurrentUser","navigate","_useState","username","password","_useState2","_slicedToArray","userFormData","setUserFormData","_useState3","_useState4","userLoginError","setUserLoginError","handleInputChange","event","_event$target","target","name","value","_objectSpread","_defineProperty","handleSubmit","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","e","response","wrap","_callee$","_context","prev","next","preventDefault","console","log","sent","token","Error","login","t0","error","stop","_x","apply","arguments","maxWidth","children","variant","align","gutterBottom","onSubmit","label","onChange","fullWidth","margin","type","color","size"],"sources":["/Users/michaelseaman/Desktop/programming_projects/Independant/game-center-gh-pages/src/pages/Login.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { loginApi } from '../utils/api/userApi';\nimport Auth from '../utils/auth';\nimport { TextField, Button, Container, Typography } from '@material-ui/core';\nimport { useNavigate } from 'react-router-dom';\nimport { useAuthContext } from '../utils/authContext';\n\n\nconst LoginForm = () => {\n  const {currentUser, setCurrentUser} = useAuthContext()\n  const navigate = useNavigate()\n\n  const [userFormData, setUserFormData] = useState({\n\t\tusername: '',\n\t\tpassword: '',\n\t});\n\n\tconst [userLoginError, setUserLoginError] = useState(false);\n\n\tconst handleInputChange = (event) => {\n\t\tconst { name, value } = event.target;\n\t\tsetUserFormData({ ...userFormData, [name]: value });\n\t};\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    console.log(userFormData)\n    // Handle login logic here\n    try {\n\t\t\tconst response = await loginApi(userFormData);\n\t\t\tif (!response.token) {\n\t\t\t\tthrow new Error('something went wrong!');\n\t\t\t}\n\t\t\tAuth.login(response.token);\n      setCurrentUser(userFormData.username)\n      navigate('/')\n\t\t} catch (err) {\n\t\t\tconsole.error(err);\n\t\t\tsetUserLoginError(true);\n\t\t}\n  };\n\n  return (\n    <Container maxWidth=\"sm\">\n      <Typography variant=\"h4\" align=\"center\" gutterBottom>\n        Login\n      </Typography>\n      <form onSubmit={handleSubmit}>\n        <TextField\n          label=\"Username\"\n          value={userFormData.username}\n          onChange={handleInputChange}\n          fullWidth\n          margin=\"normal\"\n          name='username'\n        />\n        <TextField\n          label=\"Password\"\n          type=\"password\"\n          value={userFormData.password}\n          onChange={handleInputChange}\n          fullWidth\n          margin=\"normal\"\n          name='password'\n        />\n        <Button\n          type=\"submit\"\n          variant=\"contained\"\n          color=\"primary\"\n          fullWidth\n          size=\"large\"\n        >\n          Login\n        </Button>\n      </form>\n    </Container>\n  );\n};\n\nexport default LoginForm;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}